url = "/press-releases"
layout = "default"
title = "Press releases"
is_hidden = 0
robot_index = "index"
robot_follow = "follow"

[builderList mediaPressReleasesList]
modelClass = "pensoft\Media\Models\Pressreleases"
scope = "-"
scopeValue = "{{ :scope }}"
displayColumn = "name"
noRecordsMessage = "No records found"
detailsPage = "-"
detailsUrlParameter = "id"
pageNumber = "{{ :page }}"
==
<?php
use Pensoft\Media\Models\Pressreleases;
use Pensoft\Media\Models\PressCategory;

function onStart(){
$this['categories'] = PressCategory::get();

$categoryId = input('categoryId', 'all');

if ($categoryId !== 'all' && !is_numeric($categoryId)) {
return redirect('media-center/press-releases');
}

$this['categoryId'] = $categoryId;
if ($categoryId === 'all') {
$records = Pressreleases::orderBy('date', 'desc')->get();
} else {
$records = Pressreleases::where('category_id', $categoryId)->get();
}

$this['press_items'] = $records;

}
?>
==
<main id="main-content" role="main">
    <div class="container">
        <div class="row">
            <div class="col-xs-1">
                <nav class="go_back mt-2 mb-2" aria-label="Breadcrumb">
                    <a href="/promotional-materials" aria-label="Back to Promotional Materials">Back</a>
                </nav>
            </div>
            <div class="col-xs-11 arrow_project_news">

                <div class="category-tabs-container mb-2">
                    {% if categories.count > 0 %}
                    <nav class="row category-tabs" id="category-tabs" aria-label="Press release categories">
                        <a href="{{ 'press-releasses'|page }}?categoryId=all" aria-current="{{ 'all' == categoryId ? 'page' : 'false' }}" aria-label="View all press releases">All Press Releases</a>
                        {% for category in categories %}
                        <a href="{{ 'press-releasses'|page }}?categoryId={{ category.id }}" aria-current="{{ category.id == categoryId ? 'page' : 'false' }}" aria-label="View {{ category.title }} press releases">{{ category.title }}</a>
                        {% endfor %}
                    </nav>
                    {% endif %}
                </div>

                <div class="row">
                    {% for record in press_items %}
                    {% spaceless %}
                    <article class="col-md-12 col-xs-12 press-relies-item">
                        <time class="date" datetime="{{record.date|date('Y-m-d')}}">{{record.date|date('j F Y')}}</time>
                        <h3 class="card-title">{{record.name}}</h3>
                        <div class="body">{{record.description | raw}}</div>
                        <div class="row link mt-1">
                            {% for link in record.link %}
                            <a href="{{link.url}}" target="_blank" rel="noopener noreferrer" class="btn btn-primary" style="margin-right: 10px;" aria-label="{{link.text}} (opens in new window)">{{link.text}}<span class="sr-only"> (opens in new window)</span></a>
                            {% endfor %}
                        </div>
                    </article>
                    {% endspaceless %}
                    {% else %}
                    <p role="status">No press releases</p>
                    {% endfor %}
                </div>
                <div class="row">
                    {{ records.render|raw }}
                </div>
            </div>
        </div>
    </div>
</main>
